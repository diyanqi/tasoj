{"status": "Accepted", "problem_id": 1208, "language": "cpp", "username": "diyanqi@qq.com", "code": "#include <bits/stdc++.h>\r\nusing namespace std;\r\n\r\n#define int long long\r\n\r\nsigned main()\r\n{\r\n    ios::sync_with_stdio(false);\r\n\r\n    int n, m;\r\n    cin >> n >> m;\r\n\r\n    if (n == 1 && m == 0)\r\n    {\r\n        cout << \"YES\\n1\\n1 1\" << endl;\r\n        return 0;\r\n    }\r\n\r\n    vector<int> fa(n + 2);\r\n    for (int i = 1; i <= n; i++)\r\n        fa[i] = i;\r\n\r\n    vector<int> d(n + 2);\r\n\r\n    function<int(int)> find = [&](int x) -> int {\r\n        return x == fa[x] ? x : fa[x] = find(fa[x]);\r\n    };\r\n\r\n    function<void(int, int)> merge = [&](int x, int y) -> void {\r\n        x = find(x);\r\n        y = find(y);\r\n        fa[x] = y;\r\n    };\r\n\r\n    int circle_flag = 0, self_circle = 0;\r\n\r\n    for (int i = 1; i <= m; i++)\r\n    {\r\n        int u, v;\r\n        cin >> u >> v;\r\n        if (u == v)\r\n            self_circle = 1;\r\n        if (find(u) == find(v))\r\n            circle_flag = 1;\r\n        merge(u, v);\r\n        d[u]++;\r\n        d[v]++;\r\n    }\r\n\r\n    int min_deg = 1e9, max_deg = 0;\r\n    for (int i = 1; i <= n; i++)\r\n    {\r\n        min_deg = min(min_deg, d[i]);\r\n        max_deg = max(max_deg, d[i]);\r\n    }\r\n    if (max_deg > 2 || (self_circle && n > 1))\r\n    {\r\n        cout << \"NO\" << endl;\r\n    }\r\n    else if ((circle_flag && min_deg == 2 && max_deg == 2))\r\n    {\r\n        cout << \"YES\" << endl\r\n             << 0 << endl;\r\n    }\r\n    else\r\n    {\r\n        vector<pair<int, int>> ans;\r\n        for (int i = 1; i <= n; i++)\r\n        {\r\n            for (int j = 1; j <= n; j++)\r\n                if (j != i)\r\n                {\r\n                    if (find(i) != find(j) && d[i] < 2 && d[j] < 2)\r\n                    {\r\n                        ans.push_back({min(i, j), max(i, j)});\r\n                        d[i]++;\r\n                        d[j]++;\r\n                        merge(i, j);\r\n                    }\r\n                }\r\n        }\r\n        vector<int> tmp;\r\n        for (int i = 1; i <= n; i++)\r\n            if (d[i] < 2)\r\n                tmp.push_back(i);\r\n        ans.push_back({tmp[0], tmp[1]});\r\n        int flag = 1;\r\n        if (tmp.size() == 2)\r\n        {\r\n            d[tmp[0]]++;\r\n            d[tmp[1]]++;\r\n            for (int i = 1; i <= n; i++)\r\n                if (d[i] != 2)\r\n                    flag = 0;\r\n        }\r\n        else\r\n        {\r\n            flag = 0;\r\n        }\r\n        if (flag)\r\n        {\r\n            cout << \"YES\" << endl\r\n                 << n - m << endl;\r\n            for (auto [x, y] : ans)\r\n                cout << x << \" \" << y << endl;\r\n        }\r\n        else\r\n        {\r\n            cout << \"NO\" << endl;\r\n        }\r\n    }\r\n}\r\n", "msg": "", "testpoints": [{"testpoint": 1, "status": "Accepted", "msg": "", "time": 5281381, "memory": 4915200}, {"testpoint": 2, "status": "Accepted", "msg": "", "time": 6738591, "memory": 4915200}, {"testpoint": 3, "status": "Accepted", "msg": "", "time": 5217975, "memory": 4915200}, {"testpoint": 4, "status": "Accepted", "msg": "", "time": 5325770, "memory": 4915200}, {"testpoint": 5, "status": "Accepted", "msg": "", "time": 5643786, "memory": 4915200}, {"testpoint": 6, "status": "Accepted", "msg": "", "time": 5143327, "memory": 4915200}, {"testpoint": 7, "status": "Accepted", "msg": "", "time": 5295159, "memory": 4915200}, {"testpoint": 8, "status": "Accepted", "msg": "", "time": 5335029, "memory": 4915200}, {"testpoint": 9, "status": "Accepted", "msg": "", "time": 5982801, "memory": 4915200}], "score": 90, "scorerate": "100%"}