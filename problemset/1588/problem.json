{"title": "Sagheer and Kindergarten", "type": "problem", "description": {"format": "html", "value": "<div class=\"ttypography\"><div class=\"problem-statement\"><div class=\"header\" align=\"center\"><div class=\"title\" style=\"display:none\">D. Sagheer and Kindergarten</div><div class=\"time-limit\"><div class=\"property-title\">time limit per test</div>1 second</div><div class=\"memory-limit\"><div class=\"property-title\">memory limit per test</div>256 megabytes</div><div class=\"input-file\"><div class=\"property-title\">input</div>standard input</div><div class=\"output-file\"><div class=\"property-title\">output</div>standard output</div></div><div><p>Sagheer is working at a kindergarten. There are <span class=\"tex-span\"><i>n</i></span> children and <span class=\"tex-span\"><i>m</i></span> different toys. These children use well-defined protocols for playing with the toys:</p><ul> <li> Each child has a lovely set of toys that he loves to play with. He requests the toys one after another at distinct moments of time. A child starts playing if and only if he is granted all the toys in his lovely set.</li><li> If a child starts playing, then sooner or later he gives the toys back. No child keeps the toys forever.</li><li> Children request toys at distinct moments of time. No two children request a toy at the same time.</li><li> If a child is granted a toy, he never gives it back until he finishes playing with his lovely set.</li><li> If a child is not granted a toy, he waits until he is granted this toy. He can't request another toy while waiting.</li><li> If two children are waiting for the same toy, then the child who requested it first will take the toy first.</li></ul><p>Children don't like to play with each other. That's why they never share toys. When a child requests a toy, then granting the toy to this child depends on whether the toy is free or not. If the toy is free, Sagheer will give it to the child. Otherwise, the child has to wait for it and can't request another toy.</p><p>Children are smart and can detect if they have to wait forever before they get the toys they want. In such case they start crying. In other words, a crying set is a set of children in which each child is waiting for a toy that is kept by another child in the set.</p><p>Now, we have reached a scenario where all the children made all the requests for their lovely sets, except for one child <span class=\"tex-span\"><i>x</i></span> that still has one last request for his lovely set. Some children are playing while others are waiting for a toy, but no child is crying, and no one has yet finished playing. If the child <span class=\"tex-span\"><i>x</i></span> is currently waiting for some toy, he makes his last request just after getting that toy. Otherwise, he makes the request right away. When child <span class=\"tex-span\"><i>x</i></span> will make his last request, how many children will start crying?</p><p>You will be given the scenario and <span class=\"tex-span\"><i>q</i></span> <span class=\"tex-font-style-bf\">independent</span> queries. Each query will be of the form <span class=\"tex-span\"><i>x</i></span> <span class=\"tex-span\"><i>y</i></span> meaning that the last request of the child <span class=\"tex-span\"><i>x</i></span> is for the toy <span class=\"tex-span\"><i>y</i></span>. Your task is to help Sagheer find the size of the <span class=\"tex-font-style-bf\">maximal</span> crying set when child <span class=\"tex-span\"><i>x</i></span> makes his last request.</p></div><div class=\"input-specification\"><div class=\"section-title\">Input</div><p>The first line contains four integers <span class=\"tex-span\"><i>n</i></span>, <span class=\"tex-span\"><i>m</i></span>, <span class=\"tex-span\"><i>k</i></span>, <span class=\"tex-span\"><i>q</i></span> (<span class=\"tex-span\">1&le;<i>n</i>,<i>m</i>,<i>k</i>,<i>q</i>&le;10<sup class=\"upper-index\">5</sup></span>)&minus; the number of children, toys, scenario requests and queries.</p><p>Each of the next <span class=\"tex-span\"><i>k</i></span> lines contains two integers <span class=\"tex-span\"><i>a</i></span>, <span class=\"tex-span\"><i>b</i></span> (<span class=\"tex-span\">1&le;<i>a</i>&le;<i>n</i></span> and <span class=\"tex-span\">1&le;<i>b</i>&le;<i>m</i></span>)&minus; a scenario request meaning child <span class=\"tex-span\"><i>a</i></span> requests toy <span class=\"tex-span\"><i>b</i></span>. The requests are given in the order they are made by children.</p><p>Each of the next <span class=\"tex-span\"><i>q</i></span> lines contains two integers <span class=\"tex-span\"><i>x</i></span>, <span class=\"tex-span\"><i>y</i></span> (<span class=\"tex-span\">1&le;<i>x</i>&le;<i>n</i></span> and <span class=\"tex-span\">1&le;<i>y</i>&le;<i>m</i></span>)&minus; the request to be added to the scenario meaning child <span class=\"tex-span\"><i>x</i></span> will request toy <span class=\"tex-span\"><i>y</i></span> just after getting the toy he is waiting for (if any).</p><p>It is guaranteed that the scenario requests are consistent and no child is initially crying. All the scenario requests are distinct and no query coincides with a scenario request.</p></div><div class=\"output-specification\"><div class=\"section-title\">Output</div><p>For each query, print on a single line the number of children who will start crying when child <span class=\"tex-span\"><i>x</i></span> makes his last request for toy <span class=\"tex-span\"><i>y</i></span>. Please answer all queries independent of each other.</p></div><div class=\"sample-tests\"><div class=\"section-title\">Examples</div><div class=\"sample-test\"><div class=\"input\"><div class=\"title\">Input</div><pre>3 3 5 1<br/>1 1<br/>2 2<br/>3 3<br/>1 2<br/>2 3<br/>3 1<br/></pre></div><div class=\"output\"><div class=\"title\">Output</div><pre>3<br/></pre></div><div class=\"input\"><div class=\"title\">Input</div><pre>5 4 7 2<br/>1 1<br/>2 2<br/>2 1<br/>5 1<br/>3 3<br/>4 4<br/>4 1<br/>5 3<br/>5 4<br/></pre></div><div class=\"output\"><div class=\"title\">Output</div><pre>0<br/>2<br/></pre></div></div></div><div class=\"note\"><div class=\"section-title\">Note</div><p>In the first example, child <span class=\"tex-span\">1</span> is waiting for toy <span class=\"tex-span\">2</span>, which child <span class=\"tex-span\">2</span> has, while child <span class=\"tex-span\">2</span> is waiting for top <span class=\"tex-span\">3</span>, which child <span class=\"tex-span\">3</span> has. When child <span class=\"tex-span\">3</span> makes his last request, the toy he requests is held by child <span class=\"tex-span\">1</span>. Each of the three children is waiting for a toy held by another child and no one is playing, so all the three will start crying.</p><p>In the second example, at the beginning, child <span class=\"tex-span\"><i>i</i></span> is holding toy <span class=\"tex-span\"><i>i</i></span> for <span class=\"tex-span\">1&le;<i>i</i>&le;4</span>. Children <span class=\"tex-span\">1</span> and <span class=\"tex-span\">3</span> have completed their lovely sets. After they finish playing, toy <span class=\"tex-span\">3</span> will be free while toy <span class=\"tex-span\">1</span> will be taken by child <span class=\"tex-span\">2</span> who has just completed his lovely set. After he finishes, toys <span class=\"tex-span\">1</span> and <span class=\"tex-span\">2</span> will be free and child <span class=\"tex-span\">5</span> will take toy <span class=\"tex-span\">1</span>. Now:</p><ul> <li> In the first query, child <span class=\"tex-span\">5</span> will take toy <span class=\"tex-span\">3</span> and after he finishes playing, child <span class=\"tex-span\">4</span> can play.</li><li> In the second query, child <span class=\"tex-span\">5</span> will request toy <span class=\"tex-span\">4</span> which is held by child <span class=\"tex-span\">4</span>. At the same time, child <span class=\"tex-span\">4</span> is waiting for toy <span class=\"tex-span\">1</span> which is now held by child <span class=\"tex-span\">5</span>. None of them can play and they will start crying. </li></ul></div></div><p> </p></div>\n"}, "tags": ["Codeforces"], "input_description": {"format": "html", "value": ""}, "output_description": {"format": "html", "value": ""}, "test_case_score": [{"score": 10, "input_name": "1.in", "output_name": "1.out"}, {"score": 10, "input_name": "2.in", "output_name": "2.out"}, {"score": 10, "input_name": "3.in", "output_name": "3.out"}, {"score": 10, "input_name": "4.in", "output_name": "4.out"}, {"score": 10, "input_name": "5.in", "output_name": "5.out"}, {"score": 10, "input_name": "6.in", "output_name": "6.out"}], "hint": {"format": "html", "value": ""}, "time_limit": 1000, "memory_limit": 256, "samples": [{"input": "", "output": ""}], "template": {}, "spj": null, "rule_type": "OI", "source": "", "answers": [{"language": "Python3", "code": "print('Hello, world!')"}]}