{"title": "Mirror Room", "type": "problem", "description": {"format": "html", "value": "<div class=\"ttypography\"><div class=\"problem-statement\"><div class=\"header\" align=\"center\"><div class=\"title\" style=\"display:none\">E. Mirror Room</div><div class=\"time-limit\"><div class=\"property-title\">time limit per test</div>2 seconds</div><div class=\"memory-limit\"><div class=\"property-title\">memory limit per test</div>256 megabytes</div><div class=\"input-file\"><div class=\"property-title\">input</div>standard input</div><div class=\"output-file\"><div class=\"property-title\">output</div>standard output</div></div><div><p>Imagine an <span class=\"tex-span\"><i>n</i>&times;<i>m</i></span> grid with some blocked cells. The top left cell in the grid has coordinates <span class=\"tex-span\">(1,1)</span> and the bottom right cell has coordinates <span class=\"tex-span\">(<i>n</i>,<i>m</i>)</span>. There are <span class=\"tex-span\"><i>k</i></span> blocked cells in the grid and others are empty. You flash a laser beam from the center of an empty cell <span class=\"tex-span\">(<i>x</i><sub class=\"lower-index\"><i>s</i></sub>,<i>y</i><sub class=\"lower-index\"><i>s</i></sub>)</span> in one of the diagonal directions (i.e. north-east, north-west, south-east or south-west). If the beam hits a blocked cell or the border of the grid it will reflect. The behavior of the beam reflection in different situations is depicted in the figure below. </p><center> <img class=\"tex-graphics\" src=\"http://cf.hustoj.com:80/userfiles/image/853a017fac0b290ac8a1e51cda803e89b295650855.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"/> </center><p>After a while the beam enters an infinite cycle. Count the number of empty cells that the beam goes through at least once. We consider that the beam goes through cell if it goes through its center.</p></div><div class=\"input-specification\"><div class=\"section-title\">Input</div><p>The first line of the input contains three integers <span class=\"tex-span\"><i>n</i></span>, <span class=\"tex-span\"><i>m</i></span> and <span class=\"tex-span\"><i>k</i></span> <span class=\"tex-span\">(1&le;<i>n</i>,<i>m</i>&le;10<sup class=\"upper-index\">5</sup>,0&le;<i>k</i>&le;10<sup class=\"upper-index\">5</sup>)</span>. Each of the next <span class=\"tex-span\"><i>k</i></span> lines contains two integers <span class=\"tex-span\"><i>x</i><sub class=\"lower-index\"><i>i</i></sub></span> and <span class=\"tex-span\"><i>y</i><sub class=\"lower-index\"><i>i</i></sub></span> <span class=\"tex-span\">(1&le;<i>x</i><sub class=\"lower-index\"><i>i</i></sub>&le;<i>n</i>,1&le;<i>y</i><sub class=\"lower-index\"><i>i</i></sub>&le;<i>m</i>)</span> indicating the position of the <span class=\"tex-span\"><i>i</i></span>-th blocked cell. </p><p>The last line contains <span class=\"tex-span\"><i>x</i><sub class=\"lower-index\"><i>s</i></sub></span>, <span class=\"tex-span\"><i>y</i><sub class=\"lower-index\"><i>s</i></sub></span> <span class=\"tex-span\">(1&le;<i>x</i><sub class=\"lower-index\"><i>s</i></sub>&le;<i>n</i>,1&le;<i>y</i><sub class=\"lower-index\"><i>s</i></sub>&le;<i>m</i>)</span> and the flash direction which is equal to \"<span class=\"tex-font-style-tt\">NE</span>\", \"<span class=\"tex-font-style-tt\">NW</span>\", \"<span class=\"tex-font-style-tt\">SE</span>\" or \"<span class=\"tex-font-style-tt\">SW</span>\". These strings denote directions <span class=\"tex-span\">(-1,1)</span>, <span class=\"tex-span\">(-1,-1)</span>, <span class=\"tex-span\">(1,1)</span>, <span class=\"tex-span\">(1,-1)</span>.</p><p>It's guaranteed that no two blocked cells have the same coordinates.</p></div><div class=\"output-specification\"><div class=\"section-title\">Output</div><p>In the only line of the output print the number of empty cells that the beam goes through at least once.</p><p>Please, do not write the <span class=\"tex-font-style-tt\">%lld</span> specifier to read or write 64-bit integers in C++. It is preferred to use the <span class=\"tex-font-style-tt\">cin</span>, <span class=\"tex-font-style-tt\">cout</span> streams or the <span class=\"tex-font-style-tt\">%I64d</span> specifier.</p></div><div class=\"sample-tests\"><div class=\"section-title\">Examples</div><div class=\"sample-test\"><div class=\"input\"><div class=\"title\">Input</div><pre>3 3 0<br/>1 2 SW<br/></pre></div><div class=\"output\"><div class=\"title\">Output</div><pre>6<br/></pre></div><div class=\"input\"><div class=\"title\">Input</div><pre>7 5 3<br/>3 3<br/>4 3<br/>5 3<br/>2 1 SE<br/></pre></div><div class=\"output\"><div class=\"title\">Output</div><pre>14<br/></pre></div></div></div></div></div>\n"}, "tags": ["Codeforces"], "input_description": {"format": "html", "value": ""}, "output_description": {"format": "html", "value": ""}, "test_case_score": [{"score": 10, "input_name": "1.in", "output_name": "1.out"}, {"score": 10, "input_name": "2.in", "output_name": "2.out"}, {"score": 10, "input_name": "3.in", "output_name": "3.out"}, {"score": 10, "input_name": "4.in", "output_name": "4.out"}, {"score": 10, "input_name": "5.in", "output_name": "5.out"}, {"score": 10, "input_name": "6.in", "output_name": "6.out"}, {"score": 10, "input_name": "7.in", "output_name": "7.out"}, {"score": 10, "input_name": "8.in", "output_name": "8.out"}, {"score": 10, "input_name": "9.in", "output_name": "9.out"}], "hint": {"format": "html", "value": ""}, "time_limit": 2000, "memory_limit": 256, "samples": [{"input": "", "output": ""}], "template": {}, "spj": null, "rule_type": "OI", "source": "", "answers": [{"language": "Python3", "code": "print('Hello, world!')"}]}