{"title": "Pasha and Pipe", "type": "problem", "description": {"format": "html", "value": "<div class=\"ttypography\"><div class=\"problem-statement\"><div class=\"header\" align=\"center\"><div class=\"title\" style=\"display:none\">F. Pasha and Pipe</div><div class=\"time-limit\"><div class=\"property-title\">time limit per test</div>4 seconds</div><div class=\"memory-limit\"><div class=\"property-title\">memory limit per test</div>512 megabytes</div><div class=\"input-file\"><div class=\"property-title\">input</div>standard input</div><div class=\"output-file\"><div class=\"property-title\">output</div>standard output</div></div><div><p>On a certain meeting of a ruling party \"<span class=\"tex-font-style-tt\">A</span>\" minister Pavel suggested to improve the sewer system and to create a new pipe in the city.</p><p>The city is an <span class=\"tex-span\"><i>n</i>&times;<i>m</i></span> rectangular squared field. Each square of the field is either empty (then the pipe can go in it), or occupied (the pipe cannot go in such square). Empty squares are denoted by character '<span class=\"tex-span\">.</span>', occupied squares are denoted by character '<span class=\"tex-span\">#</span>'.</p><p>The pipe must meet the following criteria:</p><ul> <li> the pipe is a polyline of width <span class=\"tex-span\">1</span>, </li><li> the pipe goes in empty squares, </li><li> the pipe starts from the edge of the field, but not from a corner square, </li><li> the pipe ends at the edge of the field but not in a corner square, </li><li> the pipe has at most <span class=\"tex-span\">2</span> turns (<span class=\"tex-span\">90</span> degrees), </li><li> the border squares of the field must share <span class=\"tex-font-style-bf\">exactly two</span> squares with the pipe, </li><li> if the pipe looks like a single segment, then the end points of the pipe must lie on distinct edges of the field, </li><li> for each non-border square of the pipe there are <span class=\"tex-font-style-bf\">exacly two</span> side-adjacent squares that also belong to the pipe, </li><li> for each border square of the pipe there is <span class=\"tex-font-style-bf\">exactly one</span> side-adjacent cell that also belongs to the pipe. </li></ul><p>Here are some samples of <span class=\"tex-font-style-bf\">allowed</span> piping routes: </p><pre><br/>           ....#            ....#            .*..#<br/>           *****            ****.            .***.<br/>           ..#..            ..#*.            ..#*.<br/>           #...#            #..*#            #..*#<br/>           .....            ...*.            ...*.<br/></pre><p>Here are some samples of <span class=\"tex-font-style-bf\">forbidden</span> piping routes: </p><pre><br/>           .**.#            *...#            .*.*#<br/>           .....            ****.            .*.*.<br/>           ..#..            ..#*.            .*#*.<br/>           #...#            #..*#            #*.*#<br/>           .....            ...*.            .***.<br/></pre><p>In these samples the pipes are represented by characters '<span class=\"tex-span\">*</span>'.</p><p>You were asked to write a program that calculates the number of distinct ways to make exactly one pipe in the city. </p><p>The two ways to make a pipe are considered distinct if they are distinct in at least one square.</p></div><div class=\"input-specification\"><div class=\"section-title\">Input</div><p>The first line of the input contains two integers <span class=\"tex-span\"><i>n</i>,<i>m</i></span> (<span class=\"tex-span\">2&le;<i>n</i>,<i>m</i>&le;2000</span>)&minus;the height and width of Berland map.</p><p>Each of the next <span class=\"tex-span\"><i>n</i></span> lines contains <span class=\"tex-span\"><i>m</i></span> characters &minus; the map of the city. </p><p>If the square of the map is marked by character '<span class=\"tex-span\">.</span>', then the square is empty and the pipe can through it. </p><p>If the square of the map is marked by character '<span class=\"tex-span\">#</span>', then the square is full and the pipe can't through it.</p></div><div class=\"output-specification\"><div class=\"section-title\">Output</div><p>In the first line of the output print a single integer &minus; the number of distinct ways to create a pipe.</p></div><div class=\"sample-tests\"><div class=\"section-title\">Examples</div><div class=\"sample-test\"><div class=\"input\"><div class=\"title\">Input</div><pre>3 3<br/>...<br/>..#<br/>...<br/></pre></div><div class=\"output\"><div class=\"title\">Output</div><pre>3</pre></div><div class=\"input\"><div class=\"title\">Input</div><pre>4 2<br/>..<br/>..<br/>..<br/>..<br/></pre></div><div class=\"output\"><div class=\"title\">Output</div><pre>2<br/></pre></div><div class=\"input\"><div class=\"title\">Input</div><pre>4 5<br/>#...#<br/>#...#<br/>###.#<br/>###.#<br/></pre></div><div class=\"output\"><div class=\"title\">Output</div><pre>4</pre></div></div></div><div class=\"note\"><div class=\"section-title\">Note</div><p>In the first sample there are 3 ways to make a pipe (the squares of the pipe are marked by characters '<span class=\"tex-span\">*</span>'): </p><pre><br/>       .*.        .*.        ...<br/>       .*#        **#        **#<br/>       .*.        ...        .*.<br/></pre></div></div></div>\n"}, "tags": ["Codeforces"], "input_description": {"format": "html", "value": ""}, "output_description": {"format": "html", "value": ""}, "test_case_score": [{"score": 10, "input_name": "1.in", "output_name": "1.out"}, {"score": 10, "input_name": "2.in", "output_name": "2.out"}, {"score": 10, "input_name": "3.in", "output_name": "3.out"}, {"score": 10, "input_name": "4.in", "output_name": "4.out"}], "hint": {"format": "html", "value": ""}, "time_limit": 4000, "memory_limit": 512, "samples": [{"input": "", "output": ""}], "template": {}, "spj": null, "rule_type": "OI", "source": "", "answers": [{"language": "Python3", "code": "print('Hello, world!')"}]}