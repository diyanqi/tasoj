{"title": "Persistent Bookcase", "type": "problem", "description": {"format": "html", "value": "<div class=\"ttypography\"><div class=\"problem-statement\"><div class=\"header\" align=\"center\"><div class=\"title\" style=\"display:none\">D. Persistent Bookcase </div><div class=\"time-limit\"><div class=\"property-title\">time limit per test</div>2 seconds</div><div class=\"memory-limit\"><div class=\"property-title\">memory limit per test</div>512 megabytes</div><div class=\"input-file\"><div class=\"property-title\">input</div>standard input</div><div class=\"output-file\"><div class=\"property-title\">output</div>standard output</div></div><div><p>Recently in school Alina has learned what are the <span class=\"tex-font-style-it\">persistent data structures</span>: they are data structures that always preserves the previous version of itself and access to it when it is modified.</p><p>After reaching home Alina decided to invent her own persistent data structure. Inventing didn't take long: there is a bookcase right behind her bed. Alina thinks that the bookcase is a good choice for a persistent data structure. Initially the bookcase is empty, thus there is no book at any position at any shelf.</p><p>The bookcase consists of <span class=\"tex-span\"><i>n</i></span> shelves, and each shelf has exactly <span class=\"tex-span\"><i>m</i></span> positions for books at it. Alina enumerates shelves by integers from <span class=\"tex-span\">1</span> to <span class=\"tex-span\"><i>n</i></span> and positions at shelves&minus; from <span class=\"tex-span\">1</span> to <span class=\"tex-span\"><i>m</i></span>. Initially the bookcase is empty, thus there is no book at any position at any shelf in it.</p><p>Alina wrote down <span class=\"tex-span\"><i>q</i></span> operations, which will be consecutively applied to the bookcase. Each of the operations has one of four types:</p><ul><li> <span class=\"tex-span\">1</span> <span class=\"tex-span\"><i>i</i></span> <span class=\"tex-span\"><i>j</i></span>&minus; Place a book at position <span class=\"tex-span\"><i>j</i></span> at shelf <span class=\"tex-span\"><i>i</i></span> if there is no book at it.</li><li> <span class=\"tex-span\">2</span> <span class=\"tex-span\"><i>i</i></span> <span class=\"tex-span\"><i>j</i></span>&minus; Remove the book from position <span class=\"tex-span\"><i>j</i></span> at shelf <span class=\"tex-span\"><i>i</i></span> if there is a book at it.</li><li> <span class=\"tex-span\">3</span> <span class=\"tex-span\"><i>i</i></span>&minus; Invert book placing at shelf <span class=\"tex-span\"><i>i</i></span>. This means that from every position at shelf <span class=\"tex-span\"><i>i</i></span> which has a book at it, the book should be removed, and at every position at shelf <span class=\"tex-span\"><i>i</i></span> which has not book at it, a book should be placed.</li><li> <span class=\"tex-span\">4</span> <span class=\"tex-span\"><i>k</i></span>&minus; Return the books in the bookcase in a state they were after applying <span class=\"tex-span\"><i>k</i></span>-th operation. In particular, <span class=\"tex-span\"><i>k</i>=0</span> means that the bookcase should be in initial state, thus every book in the bookcase should be removed from its position.</li></ul><p>After applying each of operation Alina is interested in the number of books in the bookcase. Alina got 'A' in the school and had no problem finding this values. Will you do so?</p></div><div class=\"input-specification\"><div class=\"section-title\">Input</div><p>The first line of the input contains three integers <span class=\"tex-span\"><i>n</i></span>, <span class=\"tex-span\"><i>m</i></span> and <span class=\"tex-span\"><i>q</i></span> (<span class=\"tex-span\">1&le;<i>n</i>,<i>m</i>&le;10<sup class=\"upper-index\">3</sup></span>, <span class=\"tex-span\">1&le;<i>q</i>&le;10<sup class=\"upper-index\">5</sup></span>)&minus; the bookcase dimensions and the number of operations respectively.</p><p>The next <span class=\"tex-span\"><i>q</i></span> lines describes operations in chronological order&minus; <span class=\"tex-span\"><i>i</i></span>-th of them describes <span class=\"tex-span\"><i>i</i></span>-th operation in one of the four formats described in the statement.</p><p>It is guaranteed that shelf indices and position indices are correct, and in each of fourth-type operation the number <span class=\"tex-span\"><i>k</i></span> corresponds to some operation before it or equals to <span class=\"tex-span\">0</span>.</p></div><div class=\"output-specification\"><div class=\"section-title\">Output</div><p>For each operation, print the number of books in the bookcase after applying it in a separate line. The answers should be printed in chronological order.</p></div><div class=\"sample-tests\"><div class=\"section-title\">Examples</div><div class=\"sample-test\"><div class=\"input\"><div class=\"title\">Input</div><pre>2 3 3<br/>1 1 1<br/>3 2<br/>4 0<br/></pre></div><div class=\"output\"><div class=\"title\">Output</div><pre>1<br/>4<br/>0<br/></pre></div><div class=\"input\"><div class=\"title\">Input</div><pre>4 2 6<br/>3 2<br/>2 2 2<br/>3 3<br/>3 2<br/>2 2 2<br/>3 2<br/></pre></div><div class=\"output\"><div class=\"title\">Output</div><pre>2<br/>1<br/>3<br/>3<br/>2<br/>4<br/></pre></div><div class=\"input\"><div class=\"title\">Input</div><pre>2 2 2<br/>3 2<br/>2 2 1<br/></pre></div><div class=\"output\"><div class=\"title\">Output</div><pre>2<br/>1<br/></pre></div></div></div><div class=\"note\"><div class=\"section-title\">Note</div><center><img class=\"tex-graphics\" src=\"http://cf.hustoj.com:80/userfiles/image/bf0a0e22a0c5231aa874922e9f446a5e1aed519d39.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"/><p>This image illustrates the second sample case.</p></center></div></div><p> </p></div>\n"}, "tags": ["Codeforces"], "input_description": {"format": "html", "value": ""}, "output_description": {"format": "html", "value": ""}, "test_case_score": [{"score": 10, "input_name": "1.in", "output_name": "1.out"}, {"score": 10, "input_name": "2.in", "output_name": "2.out"}, {"score": 10, "input_name": "3.in", "output_name": "3.out"}, {"score": 10, "input_name": "4.in", "output_name": "4.out"}, {"score": 10, "input_name": "5.in", "output_name": "5.out"}, {"score": 10, "input_name": "6.in", "output_name": "6.out"}, {"score": 10, "input_name": "7.in", "output_name": "7.out"}, {"score": 10, "input_name": "8.in", "output_name": "8.out"}, {"score": 10, "input_name": "9.in", "output_name": "9.out"}], "hint": {"format": "html", "value": ""}, "time_limit": 2000, "memory_limit": 512, "samples": [{"input": "", "output": ""}], "template": {}, "spj": null, "rule_type": "OI", "source": "", "answers": [{"language": "Python3", "code": "print('Hello, world!')"}]}