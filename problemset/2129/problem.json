{"title": "Theseus and labyrinth", "type": "problem", "description": {"format": "html", "value": "<div class=\"ttypography\"><div class=\"problem-statement\"><div class=\"header\" align=\"center\"><div class=\"title\" style=\"display:none\">D. Theseus and labyrinth</div><div class=\"time-limit\"><div class=\"property-title\">time limit per test</div>3 seconds</div><div class=\"memory-limit\"><div class=\"property-title\">memory limit per test</div>256 megabytes</div><div class=\"input-file\"><div class=\"property-title\">input</div>standard input</div><div class=\"output-file\"><div class=\"property-title\">output</div>standard output</div></div><div><p>Theseus has just arrived to Crete to fight Minotaur. He found a labyrinth that has a form of a rectangular field of size <span class=\"tex-span\"><i>n</i>&times;<i>m</i></span> and consists of blocks of size <span class=\"tex-span\">1&times;1</span>.</p><p><span class=\"tex-font-style-bf\">Each</span> block of the labyrinth has a button that rotates <span class=\"tex-font-style-bf\">all</span> blocks <span class=\"tex-span\">90</span> degrees clockwise. Each block rotates around its center and doesn't change its position in the labyrinth. Also, each block has some number of doors (possibly none). In one minute, Theseus can either push the button in order to rotate all the blocks <span class=\"tex-span\">90</span> degrees clockwise or pass to the neighbouring block. Theseus can go from block <span class=\"tex-span\"><i>A</i></span> to some neighbouring block <span class=\"tex-span\"><i>B</i></span> only if block <span class=\"tex-span\"><i>A</i></span> has a door that leads to block <span class=\"tex-span\"><i>B</i></span> and block <span class=\"tex-span\"><i>B</i></span> has a door that leads to block <span class=\"tex-span\"><i>A</i></span>.</p><p>Theseus found an entrance to labyrinth and is now located in block <span class=\"tex-span\">(<i>x</i><sub class=\"lower-index\"><i>T</i></sub>,<i>y</i><sub class=\"lower-index\"><i>T</i></sub>)</span>&minus; the block in the row <span class=\"tex-span\"><i>x</i><sub class=\"lower-index\"><i>T</i></sub></span> and column <span class=\"tex-span\"><i>y</i><sub class=\"lower-index\"><i>T</i></sub></span>. Theseus know that the Minotaur is hiding in block <span class=\"tex-span\">(<i>x</i><sub class=\"lower-index\"><i>M</i></sub>,<i>y</i><sub class=\"lower-index\"><i>M</i></sub>)</span> and wants to know the minimum number of minutes required to get there.</p><p>Theseus is a hero, not a programmer, so he asks you to help him.</p></div><div class=\"input-specification\"><div class=\"section-title\">Input</div><p>The first line of the input contains two integers <span class=\"tex-span\"><i>n</i></span> and <span class=\"tex-span\"><i>m</i></span> (<span class=\"tex-span\">1&le;<i>n</i>,<i>m</i>&le;1000</span>)&minus; the number of rows and the number of columns in labyrinth, respectively.</p><p>Each of the following <span class=\"tex-span\"><i>n</i></span> lines contains <span class=\"tex-span\"><i>m</i></span> characters, describing the blocks of the labyrinth. The possible characters are:</p><ul> <li> &laquo;<span class=\"tex-font-style-tt\">+</span>&raquo; means this block has <span class=\"tex-span\">4</span> doors (one door to each neighbouring block); </li><li> &laquo;<span class=\"tex-font-style-tt\">-</span>&raquo; means this block has <span class=\"tex-span\">2</span> doors&minus; to the left and to the right neighbours; </li><li> &laquo;<span class=\"tex-font-style-tt\">|</span>&raquo; means this block has <span class=\"tex-span\">2</span> doors&minus; to the top and to the bottom neighbours; </li><li> &laquo;<span class=\"tex-font-style-tt\">^</span>&raquo; means this block has <span class=\"tex-span\">1</span> door&minus; to the top neighbour; </li><li> &laquo;<span class=\"tex-font-style-tt\">&gt;</span>&raquo; means this block has <span class=\"tex-span\">1</span> door&minus; to the right neighbour; </li><li> &laquo;<span class=\"tex-font-style-tt\">&lt;</span>&raquo; means this block has <span class=\"tex-span\">1</span> door&minus; to the left neighbour; </li><li> &laquo;<span class=\"tex-font-style-tt\">v</span>&raquo; means this block has <span class=\"tex-span\">1</span> door&minus; to the bottom neighbour;</li><li> &laquo;<span class=\"tex-font-style-tt\">L</span>&raquo; means this block has <span class=\"tex-span\">3</span> doors&minus; to all neighbours except left one; </li><li> &laquo;<span class=\"tex-font-style-tt\">R</span>&raquo; means this block has <span class=\"tex-span\">3</span> doors&minus; to all neighbours except right one; </li><li> &laquo;<span class=\"tex-font-style-tt\">U</span>&raquo; means this block has <span class=\"tex-span\">3</span> doors&minus; to all neighbours except top one; </li><li> &laquo;<span class=\"tex-font-style-tt\">D</span>&raquo; means this block has <span class=\"tex-span\">3</span> doors&minus; to all neighbours except bottom one;</li><li> &laquo;<span class=\"tex-font-style-tt\">*</span>&raquo; means this block is a wall and has no doors. </li></ul><p>Left, right, top and bottom are defined from representing labyrinth as a table, where rows are numbered from <span class=\"tex-span\">1</span> to <span class=\"tex-span\"><i>n</i></span> from top to bottom and columns are numbered from <span class=\"tex-span\">1</span> to <span class=\"tex-span\"><i>m</i></span> from left to right.</p><p>Next line contains two integers&minus; coordinates of the block <span class=\"tex-span\">(<i>x</i><sub class=\"lower-index\"><i>T</i></sub>,<i>y</i><sub class=\"lower-index\"><i>T</i></sub>)</span> (<span class=\"tex-span\">1&le;<i>x</i><sub class=\"lower-index\"><i>T</i></sub>&le;<i>n</i></span>, <span class=\"tex-span\">1&le;<i>y</i><sub class=\"lower-index\"><i>T</i></sub>&le;<i>m</i></span>), where Theseus is initially located.</p><p>Last line contains two integers&minus; coordinates of the block <span class=\"tex-span\">(<i>x</i><sub class=\"lower-index\"><i>M</i></sub>,<i>y</i><sub class=\"lower-index\"><i>M</i></sub>)</span> (<span class=\"tex-span\">1&le;<i>x</i><sub class=\"lower-index\"><i>M</i></sub>&le;<i>n</i></span>, <span class=\"tex-span\">1&le;<i>y</i><sub class=\"lower-index\"><i>M</i></sub>&le;<i>m</i></span>), where Minotaur hides.</p><p>It's guaranteed that both the block where Theseus starts and the block where Minotaur is hiding have at least one door. Theseus and Minotaur may be initially located at the same block.</p></div><div class=\"output-specification\"><div class=\"section-title\">Output</div><p>If Theseus is not able to get to Minotaur, then print <span class=\"tex-font-style-tt\">-1</span> in the only line of the output. Otherwise, print the minimum number of minutes required to get to the block where Minotaur is hiding.</p></div><div class=\"sample-tests\"><div class=\"section-title\">Examples</div><div class=\"sample-test\"><div class=\"input\"><div class=\"title\">Input</div><pre>2 2<br/>+*<br/>*U<br/>1 1<br/>2 2<br/></pre></div><div class=\"output\"><div class=\"title\">Output</div><pre>-1</pre></div><div class=\"input\"><div class=\"title\">Input</div><pre>2 3<br/>&lt;&gt;&lt;<br/>&gt;&lt;&gt;<br/>1 1<br/>2 1<br/></pre></div><div class=\"output\"><div class=\"title\">Output</div><pre>4</pre></div></div></div><div class=\"note\"><div class=\"section-title\">Note</div><p>Assume that Theseus starts at the block <span class=\"tex-span\">(<i>x</i><sub class=\"lower-index\"><i>T</i></sub>,<i>y</i><sub class=\"lower-index\"><i>T</i></sub>)</span> at the moment <span class=\"tex-span\">0</span>.</p></div></div><p> </p></div>\n"}, "tags": ["Codeforces"], "input_description": {"format": "html", "value": ""}, "output_description": {"format": "html", "value": ""}, "test_case_score": [{"score": 10, "input_name": "1.in", "output_name": "1.out"}, {"score": 10, "input_name": "2.in", "output_name": "2.out"}, {"score": 10, "input_name": "3.in", "output_name": "3.out"}, {"score": 10, "input_name": "4.in", "output_name": "4.out"}, {"score": 10, "input_name": "5.in", "output_name": "5.out"}, {"score": 10, "input_name": "6.in", "output_name": "6.out"}, {"score": 10, "input_name": "7.in", "output_name": "7.out"}, {"score": 10, "input_name": "8.in", "output_name": "8.out"}, {"score": 10, "input_name": "9.in", "output_name": "9.out"}], "hint": {"format": "html", "value": ""}, "time_limit": 3000, "memory_limit": 256, "samples": [{"input": "", "output": ""}], "template": {}, "spj": null, "rule_type": "OI", "source": "", "answers": [{"language": "Python3", "code": "print('Hello, world!')"}]}